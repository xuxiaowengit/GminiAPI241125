const propertyChecker=require("./plugins/inTypeOf"),axios=require("axios");let apiIndex=0;async function generateContent(e){const o=["AIzaSyCBCJqcFJPWfVnxmwv2kiDX1Mb7hLLYYew","AIzaSyDiyqOVlm4ticaSmMwpuR1UteI43ytXvCY","AIzaSyDSCyLfYGCyI2uqlGTt6CwOoGQF0EpcNn0","AIzaSyC8INbh50rAr5ZJQ1L22iA0pQs-QhHxSOI","AIzaSyBS6tmfrFeLomXZPlBs7cczYEjzVFsHZVw","AIzaSyBbkRXZqnhYoVQ7K8-1JAUBDQHtHWRvZoE","AIzaSyDQPYYhXxXvQGzZvYPFsQwvqHNUHLAFVH0","AIzaSyDEBQF0YgLGy-qUF4KZqHHp7vJ4KqMZqwE","AIzaSyANmvPYGXLgJqNUmfwE6G9sVWHwFcGJQNA","AIzaSyDCsHPB4bEFppj0-GUYwH9QGCZvDE3PB9w","AIzaSyANmvPYGXLgJqNUmfwE6G9sVWHwFcGJQNA","AIzaSyC8INbh50rAr5ZJQ1L22iA0pQs-QhHxSOI","AIzaSyBITVzZ9nVjlBPwhoRYwdkmXxIvPezpHns","AIzaSyAmMwpF0rJJRKZN05i-AC9PJrxCMnCfMI4"];apiIndex>=o.length&&(apiIndex=0);const s={method:"post",url:"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key="+o[apiIndex],headers:{"Content-Type":"application/json"},data:{generationConfig:{temperature:1,topP:.95,topK:40,maxOutputTokens:8192,responseMimeType:"text/plain"},contents:[{parts:[{text:e}]}]},timeout:18e3};try{console.log("Request URL:",s.url);const e=await axios.request(s);console.log("Status:",e.status),e.data&&e.data.candidates&&e.data.candidates[0]&&console.log(JSON.stringify(e.data.candidates[0],null,2));const o=["data","candidates","content","text"];if(propertyChecker.hasAnyRequiredProperties(e,o)){const o=e.data.candidates[0].content;return o.apiError="normal!",o.reqStatus="success",o}{const o=e;return o.apiError="接口请求未成功！请检查地址或网络!",console.log("result2:",o.status),o.reqStatus="error",o}}catch(e){console.log("\n=== Error Details ===");const o={};return e.response?(console.log("Error Response Status:",e.response.status),console.log("Error Response Headers:",e.response.headers),console.log("Error Response Data:",JSON.stringify(e.response.data,null,2)),console.error("Server Error Response:",e.response),o.reqStatus="ErrorResponse",o.error=e.response.data):e.request?(console.log("Request was made but no response received"),console.log("Request Details:",e.request),o.reqStatus="ErrorRequest",o.error="No response received"):(console.log("Error Details:",e.message),console.log("Error Config:",e.config),o.reqStatus="ErrorMessage",o.error=e.message),console.log("Full Error Object:",e),console.log("=== End Error Details ===\n"),console.log("requestStatus:",o),o}}module.exports=generateContent;